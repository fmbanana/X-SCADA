!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],factory):factory(global.dataTool={},global.echarts)}(this,(function(exports,echarts){"use strict";var arrayProto,nativeMap=Array.prototype.map;function map(obj,cb,context){if(obj&&cb){if(obj.map&&obj.map===nativeMap)return obj.map(cb,context);for(var result=[],i=0,len=obj.length;i<len;i++)result.push(cb.call(context,obj[i],i,obj));return result}}function parse(xml){var doc,parser;"string"==typeof xml?doc=(new DOMParser).parseFromString(xml,"text/xml"):doc=xml;if(!doc||doc.getElementsByTagName("parsererror").length)return null;var gexfRoot=getChildByTagName(doc,"gexf");if(!gexfRoot)return null;for(var graphRoot=getChildByTagName(gexfRoot,"graph"),attributes=parseAttributes(getChildByTagName(graphRoot,"attributes")),attributesMap={},i=0;i<attributes.length;i++)attributesMap[attributes[i].id]=attributes[i];return{nodes:parseNodes(getChildByTagName(graphRoot,"nodes"),attributesMap),links:parseEdges(getChildByTagName(graphRoot,"edges"))}}function parseAttributes(parent){return parent?map(getChildrenByTagName(parent,"attribute"),(function(attribDom){return{id:getAttr(attribDom,"id"),title:getAttr(attribDom,"title"),type:getAttr(attribDom,"type")}})):[]}function parseNodes(parent,attributesMap){return parent?map(getChildrenByTagName(parent,"node"),(function(nodeDom){var id,label,node={id:getAttr(nodeDom,"id"),name:getAttr(nodeDom,"label"),itemStyle:{normal:{}}},vizSizeDom=getChildByTagName(nodeDom,"viz:size"),vizPosDom=getChildByTagName(nodeDom,"viz:position"),vizColorDom=getChildByTagName(nodeDom,"viz:color"),attvaluesDom=getChildByTagName(nodeDom,"attvalues");if(vizSizeDom&&(node.symbolSize=parseFloat(getAttr(vizSizeDom,"value"))),vizPosDom&&(node.x=parseFloat(getAttr(vizPosDom,"x")),node.y=parseFloat(getAttr(vizPosDom,"y"))),vizColorDom&&(node.itemStyle.normal.color="rgb("+[0|getAttr(vizColorDom,"r"),0|getAttr(vizColorDom,"g"),0|getAttr(vizColorDom,"b")].join(",")+")"),attvaluesDom){var attvalueDomList=getChildrenByTagName(attvaluesDom,"attvalue");node.attributes={};for(var j=0;j<attvalueDomList.length;j++){var attvalueDom=attvalueDomList[j],attId=getAttr(attvalueDom,"for"),attValue=getAttr(attvalueDom,"value"),attribute=attributesMap[attId];if(attribute){switch(attribute.type){case"integer":case"long":attValue=parseInt(attValue,10);break;case"float":case"double":attValue=parseFloat(attValue);break;case"boolean":attValue="true"===attValue.toLowerCase()}node.attributes[attId]=attValue}}}return node})):[]}function parseEdges(parent){return parent?map(getChildrenByTagName(parent,"edge"),(function(edgeDom){var id,label,sourceId,targetId,edge={id:getAttr(edgeDom,"id"),name:getAttr(edgeDom,"label"),source:getAttr(edgeDom,"source"),target:getAttr(edgeDom,"target"),lineStyle:{normal:{}}},lineStyle=edge.lineStyle.normal,vizThicknessDom=getChildByTagName(edgeDom,"viz:thickness"),vizColorDom=getChildByTagName(edgeDom,"viz:color");return vizThicknessDom&&(lineStyle.width=parseFloat(vizThicknessDom.getAttribute("value"))),vizColorDom&&(lineStyle.color="rgb("+[0|getAttr(vizColorDom,"r"),0|getAttr(vizColorDom,"g"),0|getAttr(vizColorDom,"b")].join(",")+")"),edge})):[]}function getAttr(el,attrName){return el.getAttribute(attrName)}function getChildByTagName(parent,tagName){for(var node=parent.firstChild;node;){if(1===node.nodeType&&node.nodeName.toLowerCase()===tagName.toLowerCase())return node;node=node.nextSibling}return null}function getChildrenByTagName(parent,tagName){for(var node=parent.firstChild,children=[];node;)node.nodeName.toLowerCase()===tagName.toLowerCase()&&children.push(node),node=node.nextSibling;return children}var gexf=(Object.freeze||Object)({parse:parse});function asc(arr){return arr.sort((function(a,b){return a-b})),arr}function quantile(ascArr,p){var H=(ascArr.length-1)*p+1,h=Math.floor(H),v=+ascArr[h-1],e=H-h;return e?v+e*(ascArr[h]-v):v}var prepareBoxplotData=function(rawData,opt){for(var boxData=[],outliers=[],axisData=[],boundIQR=(opt=opt||[]).boundIQR,useExtreme="none"===boundIQR||0===boundIQR,i=0;i<rawData.length;i++){axisData.push(i+"");var ascList=asc(rawData[i].slice()),Q1=quantile(ascList,.25),Q2=quantile(ascList,.5),Q3=quantile(ascList,.75),min=ascList[0],max=ascList[ascList.length-1],bound=(null==boundIQR?1.5:boundIQR)*(Q3-Q1),low=useExtreme?min:Math.max(min,Q1-bound),high=useExtreme?max:Math.min(max,Q3+bound);boxData.push([low,Q1,Q2,Q3,high]);for(var j=0;j<ascList.length;j++){var dataItem=ascList[j];if(dataItem<low||dataItem>high){var outlier=[i,dataItem];"vertical"===opt.layout&&outlier.reverse(),outliers.push(outlier)}}}return{boxData:boxData,outliers:outliers,axisData:axisData}},version="1.0.0";echarts.dataTool&&(echarts.dataTool.version="1.0.0",echarts.dataTool.gexf=gexf,echarts.dataTool.prepareBoxplotData=prepareBoxplotData),exports.version="1.0.0",exports.gexf=gexf,exports.prepareBoxplotData=prepareBoxplotData}));